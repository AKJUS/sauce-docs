<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-api-testing/on-prem/self-hosted/deployment-docker" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">Deployment – Docker (Self-Hosted) | Sauce Labs Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.saucelabs.com/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/deployment-docker/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Deployment – Docker (Self-Hosted) | Sauce Labs Documentation"><meta data-rh="true" name="description" content="Legacy DocumentationYou&#x27;re viewing legacy documentation for API Fortress (deployed via an on-premises container). To view documentation for the new SaaS version of API Fortress &amp;#8212; now known as Sauce Labs API Testing and Monitoring (with Sauce Connect tunnels) &amp;#8212; see API Testing on the Sauce Labs Cloud."><meta data-rh="true" property="og:description" content="Legacy DocumentationYou&#x27;re viewing legacy documentation for API Fortress (deployed via an on-premises container). To view documentation for the new SaaS version of API Fortress &amp;#8212; now known as Sauce Labs API Testing and Monitoring (with Sauce Connect tunnels) &amp;#8212; see API Testing on the Sauce Labs Cloud."><meta data-rh="true" name="keywords" content="api,api-fortress,deployment,docker"><meta data-rh="true" name="robots" content="noindex"><link data-rh="true" rel="canonical" href="https://docs.saucelabs.com/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/deployment-docker/"><link data-rh="true" rel="alternate" href="https://docs.saucelabs.com/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/deployment-docker/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.saucelabs.com/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/deployment-docker/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RO95H65NEO-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-6735579-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>


<link rel="search" type="application/opensearchdescription+xml" title="Sauce Labs Documentation" href="/sauce-docs/pr-preview/pr-2906/opensearch.xml">

<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
<script src="/scripts/hide.js"></script>
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="9e4c4ce3-8349-4030-9de7-0b1d368edfce"></script>
<script src="https://solve-widget.forethought.ai/embed.js" data-api-key="1f0243be-fd74-4205-bbff-cf72bc3c96b3" data-ft-location="docs"></script><link rel="stylesheet" href="/sauce-docs/pr-preview/pr-2906/assets/css/styles.73f7864e.css">
<script src="/sauce-docs/pr-preview/pr-2906/assets/js/runtime~main.d24e0c33.js" defer="defer"></script>
<script src="/sauce-docs/pr-preview/pr-2906/assets/js/main.cdeaef09.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/sauce-docs/pr-preview/pr-2906/"><div class="navbar__logo"><img src="/sauce-docs/pr-preview/pr-2906/img/sl-logo-horizontal-color-dark.svg" alt="Sauce Labs logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/sauce-docs/pr-preview/pr-2906/img/sl-logo-horizontal-color-neutral.svg" alt="Sauce Labs logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/sauce-docs/pr-preview/pr-2906/overview/">Docs</a><a class="navbar__item navbar__link" href="/sauce-docs/pr-preview/pr-2906/dev/api/">API</a><a class="navbar__item navbar__link" href="/sauce-docs/pr-preview/pr-2906/dev/cli/">CLI</a><a class="navbar__item navbar__link" href="/sauce-docs/pr-preview/pr-2906/visual-testing/">Visual (New)</a><a class="navbar__item navbar__link" href="/sauce-docs/pr-preview/pr-2906/testfairy/">Beta Testing</a><a class="navbar__item navbar__link" href="/sauce-docs/pr-preview/pr-2906/error-reporting/getting-started/">Error Reporting</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/quick-start/">API Testing On-Prem (Legacy)</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/quick-start/">Quickstart (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/api/v3/">APIs and Webhooks (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/assertion-components/assert-compares/">Assertion Components (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/bloodhound/">Bloodhound (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/ci/apif-auto/">CI/CD (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/how-to/assertions-for-metrics-performance/">How To Guides (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/io-components/">I/O Components (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/integrations/add-new-connector/">Integrations (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/learn-more/downloader-101/">Learn More (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/logical-components/each/">Logical Components (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/mocking/expressions-in-mocked-apis/">Mocking / Service Virtualization (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/how-to/generate-a-status-page/">Monitoring (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/postman/build-from-collections/">Postman (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/product-information/api-tests-vs-schema-validation/">Product Information (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/assertion-components/assert-compares/">Reference (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/security-testing/example-security-tests/">Security Testing (Legacy)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/on-prem-platform/">Self Hosted (Legacy)</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/on-prem-platform/">The Self Hosted Platform</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/deployment-docker/">Other Platforms</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/deployment-docker/">Deployment – Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/deployment-kubernetes/">Deployment - Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/red-hat-openshift/">Deployment – Red Hat OpenShift</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/best-practices-for-disaster-recovery/">Best Practices for Disaster Recovery (Self-Hosted)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/certificate-based-mutual-ssl-tls-authentication/">Certificate-based (mutual) SSL/TLS Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/deployment-configure-the-dns-for-the-mocking-service/">Deployment – Configure the DNS for the Mocking Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/learn-more/downloader-101/">Downloader 101</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/enabling-api-fortress-to-read-local-files/">Enabling API Fortress to Read Local Files</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/how-to/load-agent-deployment/">Load Agent Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/local-downloader-setup/">Local Downloader Setup (Self-Hosted)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/multiple-client-cert-downloader/">Multiple Client-Cert Downloader</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/proxy-settings-in-downloader/">Proxy Settings in Downloader</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/updating-the-api-fortress-license-key/">Updating the API Fortress License Key</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/using-rds-and-documentdb/">Using RDS and DocumentDB</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/sauce-docs/pr-preview/pr-2906/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">API Testing On-Prem (Legacy)</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Self Hosted (Legacy)</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Other Platforms</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Deployment – Docker</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Deployment – Docker (Self-Hosted)</h1></header>
<blockquote>
<p><strong>Legacy Documentation</strong><br>You&#x27;re viewing legacy documentation for API Fortress (deployed via an on-premises container). To view documentation for the new SaaS version of API Fortress — now known as Sauce Labs API Testing and Monitoring (with Sauce Connect tunnels) — see <a href="/sauce-docs/pr-preview/pr-2906/api-testing/">API Testing on the Sauce Labs Cloud</a>.</p>
</blockquote>
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>This manual will describe a normal deployment procedure for API Fortress self-hosted/on-premises, using a Docker container. It is important to remember that the goal of this guide is to be as thorough as possible. It may seem long but the process is fairly straightforward.</p>
<p>Also, don&#x27;t fret as we can provide as much help and guidance as you need. We are just a video conference away!</p>
<p>If you do not have the following files:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/create_network.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/core/docker-compose.yml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/core/tomcat_conf/conf/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/core/start_all.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/downloader/docker-compose.yml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/data/connectors.tgz</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/data/help.tgz</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/data/import_help.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/data/import_connectors.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Please reach out to us at <a href="mailto:sales@apifortress.com" target="_blank" rel="noopener noreferrer">sales@apifortress.com</a> or fill out the <a href="https://apifortress.com/doc/on-premises-questionnaire-docker-self-hosted/" target="_blank" rel="noopener noreferrer">questionnaire</a> here and someone will contact you with deployment files.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-copy-the-provided-script-files">1. Copy the Provided Script Files<a href="#1-copy-the-provided-script-files" class="hash-link" aria-label="Direct link to 1. Copy the Provided Script Files" title="Direct link to 1. Copy the Provided Script Files">​</a></h2>
<p>Copy the provided <code>core</code> and <code>downloader</code> directories to the server and then type <strong><code>cd core/</code></strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-configure-the-core-services">2. Configure the Core Services<a href="#2-configure-the-core-services" class="hash-link" aria-label="Direct link to 2. Configure the Core Services" title="Direct link to 2. Configure the Core Services">​</a></h2>
<p>Before anything else, let’s configure each service and prepare the environment. Most configuration keys are stored within the <code>core/docker-compose.yml</code> file.</p>
<p>PostgreSQL The only special configuration will be the storage on the host machine. Create a directory that will host PostgreSQL data in the host machine, and edit configuration file with that location. Replace the <code>&quot;/data/postgres&quot;</code> with your details.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    volumes: - /data/postgres:/var/lib/postgresql/data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>MongoDB As with PostgreSQL, you are required to provide a storage location and edit the volumes key accordingly. Replace the &quot;/data/mongodb&quot; with your location.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   volumes: - /data/mongodb:/data/db</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>API Fortress There are a lot of configuration keys here. None of them should be left empty (a fake value is fine if you&#x27;re not using a certain feature). See the API Fortress Configuration Guide below for an explanation of each key.</p>
<p>The essential keys for bootstrap (with dummy values) are:</p>
<ul>
<li>
<p><strong>Admin User Creation</strong> <code>adminEmail: patrick@company.com adminFullName: Patrick Poulin</code></p>
</li>
<li>
<p><strong>Company Creation</strong> <code>defaultCompanyName: Your Company</code></p>
</li>
<li>
<p><strong>Base URL that will respond to HTTP requests</strong> <code>grailsServerURL: http://yourcompany.com/app</code></p>
</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The <code>/app</code> part is required.</p></div></div>
<ul>
<li>
<p><strong>API Fortress Mailer</strong> Refer below.</p>
</li>
<li>
<p><strong>API Fortress Downloader</strong> To be configured after the dashboard bootstrap. Refer below.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-install-docker">3. Install Docker<a href="#3-install-docker" class="hash-link" aria-label="Direct link to 3. Install Docker" title="Direct link to 3. Install Docker">​</a></h2>
<p>Install Docker on a supported Linux distribution following the official instructions: <a href="https://docs.docker.com/engine/installation/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/installation/</a> The API Fortress stack runs successfully on Docker 1.12.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-install-docker-compose">4. Install Docker Compose<a href="#4-install-docker-compose" class="hash-link" aria-label="Direct link to 4. Install Docker Compose" title="Direct link to 4. Install Docker Compose">​</a></h2>
<p>Docker Compose is a utility that simplifies the deployment and management of complete stacks. Follow the official instructions for installation: <a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/install/</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-provide-api-fortress-your-dockerhub-username">5. Provide API Fortress your DockerHub <code>username</code><a href="#5-provide-api-fortress-your-dockerhub-username" class="hash-link" aria-label="Direct link to 5-provide-api-fortress-your-dockerhub-username" title="Direct link to 5-provide-api-fortress-your-dockerhub-username">​</a></h2>
<p>For API Fortress to grant you access to the API Fortress registries, your DockerHub username is required. If you don&#x27;t have a DockerHub account, create one at <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">https://hub.docker.com/</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-login">6. Login<a href="#6-login" class="hash-link" aria-label="Direct link to 6. Login" title="Direct link to 6. Login">​</a></h2>
<p>Type <code>sudo docker login</code> and input your DockerHub credentials.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-create-the-api-fortress-network">7. Create the API Fortress <code>network</code><a href="#7-create-the-api-fortress-network" class="hash-link" aria-label="Direct link to 7-create-the-api-fortress-network" title="Direct link to 7-create-the-api-fortress-network">​</a></h2>
<p>The default API Fortress subnet is <code>172.18.0.0/16</code>. Make sure the default subnet is not in use. If it is then edit it in the <code>create_network.sh</code> script. Issue <strong><code>sudo ./create_network.sh</code></strong> to create a virtual subnet for API Fortress.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-launch-the-services">8. Launch the Services<a href="#8-launch-the-services" class="hash-link" aria-label="Direct link to 8. Launch the Services" title="Direct link to 8. Launch the Services">​</a></h2>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Before you launch any service, we strongly recommend you to run:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose pull</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>from the &quot;core&quot; and &quot;downloader&quot; directories to download all packages and preemptively verify any possible connection issue.</p></div></div>
<p>To launch all core services, just run the <code>start_all.sh</code> script. It will take some time, but it will ensure every dependency is up and running before launching API Fortress.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="9-verify-the-deployment">9. Verify the Deployment<a href="#9-verify-the-deployment" class="hash-link" aria-label="Direct link to 9. Verify the Deployment" title="Direct link to 9. Verify the Deployment">​</a></h2>
<p>At the end of the process, the API Fortress dashboard should be up and running in the host server on <code>port 80</code>. You can also check for errors in the logs by issuing the following command:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo docker-compose logs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The admin user login details are as follows:</p>
<ul>
<li><code>username</code>: the email address provided in the <code>docker-compose</code> configuration, in the adminEmailfield;</li>
<li><code>password</code>: &#x27;foobar&#x27;, change it as soon as you log in.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="10-configure-and-run-the-downloader">10. Configure and Run the Downloader<a href="#10-configure-and-run-the-downloader" class="hash-link" aria-label="Direct link to 10. Configure and Run the Downloader" title="Direct link to 10. Configure and Run the Downloader">​</a></h2>
<p>The API Fortress downloader is the agent that retrieves the resources to be tested. Downloaders can be installed in various locations, so factors such as latency and download time can be measured by remote consumers.</p>
<p>In this configuration path, we are deploying a downloader in the same server as API Fortress, and it will serve as the default downloader.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Downloader 101</div><div class="admonitionContent_BuS1"><p>Click here to learn more about the <a href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/learn-more/downloader-101/">Downloaders</a>.</p></div></div>
<ol>
<li>
<p>Edit the <code>downloader/docker-compose.yml</code> file and take note of the value of the <code>ipv4_address</code> configuration key.</p>
</li>
<li>
<p>Login to API Fortress with the admin user, access the API Fortress admin panel by clicking the “user” icon in the top right, then click Admin Panel.</p>
</li>
</ol>
<img src="/sauce-docs/pr-preview/pr-2906/img/api-fortress/2017/01/login.png" alt="Login">
<ol start="3">
<li>
<p>Choose “Downloaders” from the list of actions and click on the “Add Downloader” button.</p>
</li>
<li>
<p>Fill the fields:</p>
<ul>
<li>Name: Write a recognizable name</li>
<li>Location: A representation of where the downloader is (e.g., Chicago).</li>
<li>Latitude / Longitude: The geographical position of the downloader</li>
<li>Last Resort: Check this to make it the default downloader used</li>
<li>URL: The address of the downloader, followed by port (default <code>8819</code>) and path /api. In our example, the <code>ipv4_address</code> and our downloader address would result in <code>https://172.18.1.1:8819/api</code></li>
<li>API Key, API Secret: Write these two values down for use later.</li>
<li>Assign to company: This is where you can choose which company in your instance has access to the downloader you are creating.</li>
</ul>
</li>
</ol>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>If you would like to use the same downloader across all companies in your instance, you can choose the option &quot;Public downloader&quot;.</p><p>Choosing &quot;Public downloader&quot; does not make it publicly accessible by anyone, this just means it is accessible by all companies within your instance.</p></div></div>
<ol start="5">
<li>
<p>Edit the <code>downloader/docker-compose.yml</code> file and enter the API Key and API Secret.</p>
</li>
<li>
<p>Go to the <code>downloader/</code> directory and issue the <code>sudo docker-compose up -d</code> command.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="11-configure-and-run-the-load-agent">11. Configure and run the Load Agent<a href="#11-configure-and-run-the-load-agent" class="hash-link" aria-label="Direct link to 11. Configure and run the Load Agent" title="Direct link to 11. Configure and run the Load Agent">​</a></h2>
<p>If your contract includes load testing capabilities, you will need to deploy at least one load agent to use this feature. A load agent is an application that will be used by the API Fortress platform to run tests in parallel to cause higher load.</p>
<p>This manual describes how to run the first load agent in the server running the dashboard. This setup is acceptable for testing purposes. On production, we suggest dedicating the load agent a separate machine.</p>
<p>The directory containing the configuration for the load agent is called <strong>core-server</strong> and is part of your distribution.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-configure-the-maximum-users-per-load-agent">Step 1: Configure the maximum users per load agent<a href="#step-1-configure-the-maximum-users-per-load-agent" class="hash-link" aria-label="Direct link to Step 1: Configure the maximum users per load agent" title="Direct link to Step 1: Configure the maximum users per load agent">​</a></h3>
<p>Users per agent are the maximum number of virtual users that each Load Agent can provide.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>It&#x27;s important to remember that large numbers of simulated users will require large amounts of hardware resources. Contact your DevOps team to develop a strategy for resource allocation.</p></div></div>
<ul>
<li>Locate and open the file named <em>application.conf</em>. It is located in <em>core-server/etc</em>.</li>
<li>Line 14 of this file (fixed-pool-size) should have it&#x27;s value adjusted to match the desired number of maximum users per agent.</li>
<li>Line 48 of this file (nr-of-instances) should have it&#x27;s value adjusted to match the desired number of maximum users per agent. These two values should match.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-configure-the-configyml-file">Step 2: Configure the config.yml file<a href="#step-2-configure-the-configyml-file" class="hash-link" aria-label="Direct link to Step 2: Configure the config.yml file" title="Direct link to Step 2: Configure the config.yml file">​</a></h3>
<ul>
<li>Locate and open <em>config.yml.</em> It is located at <em>core-server/etc.</em></li>
<li>First, we have to configure the baseURL<!-- -->
<ul>
<li>baseURL is located on line 3.</li>
<li>If the Load Agent and the API Fortress Dashboard are located on the same server, then you can replace the baseURL with the internal address and port of the Dashboard on the server.</li>
<li>If the Load Agent and the API Fortress Dashboard are located on different servers, you can replace the baseURL with the actual URL of the Dashboard. That is to say, the URL you would use to access it via web browser.</li>
</ul>
</li>
<li>Next, we need to provide the API Key and Secret.<!-- -->
<ul>
<li>Open the main API Fortress dashboard and click the gear icon in the upper right corner to access the settings menu</li>
<li>Click the &quot;<em>API Keys</em>&quot; option in the left sidebar.</li>
<li>Click &quot;<em>+API Key&quot;</em></li>
</ul>
</li>
</ul>
<img src="/sauce-docs/pr-preview/pr-2906/img/api-fortress/2018/06/CreateAPIKey-1024x640.gif" alt="CreateAPIKey.gif">
<p>(Click image for GIF of procedure)</p>
<ul>
<li>Copy the<em>API Key_to line 5 of _config.yml</em>.</li>
<li>Copy the<em>Secret</em> to line 6 of <em>config.yml</em>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-add-the-engine">Step 3: Add the engine<a href="#step-3-add-the-engine" class="hash-link" aria-label="Direct link to Step 3: Add the engine" title="Direct link to Step 3: Add the engine">​</a></h3>
<ul>
<li>The next step is to add the new Engine to API Fortress itself.</li>
<li>Log into API Fortress as an administrator.</li>
<li>Click the user icon in the upper right corner, and then click <em>&quot;Admin Panel&quot;</em></li>
<li>Click <em>&quot;Engines&quot;</em> on the left side of the screen.</li>
<li>Click &quot;<em>+Engine&quot;</em></li>
<li>Enter the name and location of the Engine.</li>
<li>The CRN value defaults to a random string. You <em>must</em> change it to something human-readable. This is the internal name of the engine.</li>
<li>After modifying the CRN, copy the value to line 11 of <em>config.yml</em></li>
<li>Copy the secret to line 12 of <em>config.yml</em></li>
<li>Select the Owning Company of the Engine. An Engine must be owned by a single company. The default value (Public Engine) should <em>not</em> be chosen.</li>
<li>Select <em>&quot;Yes&quot;</em> for &quot;<em>Dedicated to Load Testing</em>&quot;</li>
<li>Click the green check to save the Engine settings.</li>
</ul>
<img src="/sauce-docs/pr-preview/pr-2906/img/api-fortress/2018/06/ezgif.com-gif-maker-1-1024x640.gif" alt="ezgif">
<p>(Click image for GIF of procedure)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-run-the-engine">Step 4: Run the engine<a href="#step-4-run-the-engine" class="hash-link" aria-label="Direct link to Step 4: Run the engine" title="Direct link to Step 4: Run the engine">​</a></h3>
<p>At the desired server location, use the &quot;<em>docker-compose up -d</em>&quot; command to deploy the Load Agent container. After the operation is complete, the Load Agent will be visible to your API Fortress Load Tests.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="api-fortress-configuration-guide">API Fortress Configuration Guide<a href="#api-fortress-configuration-guide" class="hash-link" aria-label="Direct link to API Fortress Configuration Guide" title="Direct link to API Fortress Configuration Guide">​</a></h2>
<p>A description of each configuration field you may need to alter.</p>
<p>API Fortress Dashboard</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bootstrap">Bootstrap<a href="#bootstrap" class="hash-link" aria-label="Direct link to Bootstrap" title="Direct link to Bootstrap">​</a></h3>
<ul>
<li><strong>adminEmail</strong>: The admin user email address, also used as login.</li>
<li><strong>adminFullName</strong>: The admin&#x27;s full name.</li>
<li><strong>defaultCompanyName</strong>: The company name.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="system">System<a href="#system" class="hash-link" aria-label="Direct link to System" title="Direct link to System">​</a></h3>
<ul>
<li><strong>grailsServerURL</strong>: the url the server will respond to</li>
<li><strong>dbHost</strong>: MongoDB host</li>
<li><strong>psqlhost</strong>: PostgreSQL host</li>
<li><strong>rabbitHost</strong>: RabbitMQ host</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>In case you&#x27;re considering using an external PostgreSQL provider, the <strong>psqlUsername</strong> and <strong>psqlPassword</strong> parameters are also available. The database name is fixed and it&#x27;s <strong>apipulse</strong>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="email">Email<a href="#email" class="hash-link" aria-label="Direct link to Email" title="Direct link to Email">​</a></h3>
<ul>
<li><strong>apifortressMailUseSES: set to ‘true’ if you will use Amazon SES to send emails. When set to ‘false’, SMTP is used instead.</strong></li>
<li><strong>apifortressMailFrom</strong>: the email address that will be used to dispatch administrative emails.</li>
<li><strong>apifortressMailSmtpHost</strong>: SMTP host to dispatch administrative emails.</li>
<li><strong>apifortressMailSmtpUsername</strong>: SMTP username.</li>
<li><strong>apifortressMailSmtpPassword</strong>: SMTP password.</li>
<li><strong>apifortressMailSmtpPort:</strong> SMTP port.</li>
<li><strong>amazonkey</strong>: Amazon key, if you’re using Amazon SES to send emails.</li>
<li><strong>amazonsecret</strong>: Amazon secret, if you’re using Amazon SES to send emails.</li>
<li><strong>apiaryClientId:</strong> client ID if you’re using Apiary services.</li>
<li><strong>apiarySecret:</strong> secret, if you’re using Apiary services.</li>
<li><strong>license:</strong> the license string.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="api-fortress-mailer">API Fortress Mailer<a href="#api-fortress-mailer" class="hash-link" aria-label="Direct link to API Fortress Mailer" title="Direct link to API Fortress Mailer">​</a></h3>
<ul>
<li><strong>twilioSid</strong>: SID, if you’re sending SMSes via Twilio.</li>
<li><strong>twilioToken</strong>: token, if you’re sending SMSes via Twilio.</li>
<li><strong>smsFrom</strong>: the phone number of the SMS sender, if you’re sending SMSes via Twilio.</li>
<li><strong>mailFrom</strong>: the email address that will be sending notification emails.</li>
<li><strong>mailUseSES</strong>: ‘true’ if you’re sending emails via Amazon SES. False if you’re using SMTP.</li>
<li><strong>amazonKey:</strong> the Amazon key, if you’re sending emails via Amazon SES.</li>
<li><strong>amazonSecret</strong>: the Amazon secret, if you’re sending emails via Amazon SES.</li>
<li><strong>mailSmtpHost</strong>: the SMTP host.</li>
<li><strong>mailSmtpPort</strong>: the SMTP port.</li>
<li><strong>mailSmtpUsername</strong>: the SMTP username.</li>
<li><strong>mailSmtpPassword</strong>: the SMTP password.</li>
<li><strong>apifortressServerURL</strong>: the url the server will respond to.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="api-fortress-downloader">API Fortress Downloader<a href="#api-fortress-downloader" class="hash-link" aria-label="Direct link to API Fortress Downloader" title="Direct link to API Fortress Downloader">​</a></h3>
<ul>
<li><strong>apikey</strong>: the API key, as shown in the admin panel.</li>
<li><strong>secret</strong>: the API secret, as shown in the admin panel.</li>
<li><strong>port</strong>: the HTTP port the server will be listening to, in HTTP mode.</li>
<li><strong>rabbitHost</strong>: the RabbitMQ host, when running in active mode.</li>
<li><strong>rabbitPort</strong>: the RabbitMQ port, when running in active mode.</li>
<li><strong>rabbitSsl</strong>: ‘true’ if RabbitMQ will need to communicate over SSL when running in active mode.</li>
<li><strong>rabbitUsername</strong>: the RabbitMQ username when running in active mode.</li>
<li><strong>rabbitPassword</strong>: the RabbitMQ password when running in active mode.</li>
<li><strong>use_rabbit</strong>: ‘true’ to run in active mode.</li>
<li><strong>use_http</strong>: ‘true’ to use the internal HTTP server (passive mode).</li>
<li><strong>use_ssl</strong>: &#x27;true&#x27; if the internal HTTP server has to run over SSL.
The network configuration is also important as the IP address may be used for internal communication.</li>
<li><strong>networks.apifortress.ipv4_address</strong>: the reserved IP address in the API Fortress subnet.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix-importing-help-tools-and-connectors">Appendix: Importing help tools and connectors<a href="#appendix-importing-help-tools-and-connectors" class="hash-link" aria-label="Direct link to Appendix: Importing help tools and connectors" title="Direct link to Appendix: Importing help tools and connectors">​</a></h2>
<p>The API Fortress database comes free from data, but the provided package gives you the option to import the help tools and the connectors. These operations are meant to be run once the API Fortress stack is fully functional.</p>
<ul>
<li><strong>Import Help</strong> From the /data directory, run the <code>import_help.sh</code> script.</li>
<li><strong>Import Connectors</strong> From the /data directory, run the <code>import_connectors.sh</code> script.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix-tweaking-tomcat-configuration">Appendix: Tweaking Tomcat Configuration<a href="#appendix-tweaking-tomcat-configuration" class="hash-link" aria-label="Direct link to Appendix: Tweaking Tomcat Configuration" title="Direct link to Appendix: Tweaking Tomcat Configuration">​</a></h2>
<p>If you need to tweak the Tomcat configuration, you will need to mount the Tomcat conf/ directory in your system.</p>
<ol>
<li>
<p>Change the configuration files you need to edit in the <code>core/tomcat_conf/conf</code> directory</p>
</li>
<li>
<p>Mount the directory by uncommenting the following lines in the <code>core/docker-compose.yml</code> file:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> ./tomcat_conf/conf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">/usr/local/tomcat/conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dashboard-over-ssl">Dashboard over SSL<a href="#dashboard-over-ssl" class="hash-link" aria-label="Direct link to Dashboard over SSL" title="Direct link to Dashboard over SSL">​</a></h3>
<p>To have Tomcat running over SSL:</p>
<ol>
<li>
<p>Copy your JKS keystore containing your certificate in the <code>core/tomcat_conf/conf</code> directory</p>
</li>
<li>
<p>Edit the <code>core/tomcat_conf/conf/server.xml</code> file and uncomment the block:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">Connector</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">port</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">8443</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">protocol</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">org.apache.coyote.http11.Http11Protocol</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">maxThreads</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">150</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">SSLEnabled</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">true</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">scheme</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">https</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">secure</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">true</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">clientAuth</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">false</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">sslProtocol</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">TLS</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Edit the block by adding the following attributes:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">keystoreFile</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/usr/local/tomcat/conf/keystore.jks&quot;</span><span class="token plain"> keystorePass</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;thePasswordHere&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Mount the directory by uncommenting the following lines in the <code>core/docker-compose.yml</code> file:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> ./tomcat_conf/conf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">/usr/local/tomcat/conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>In the <code>core/docker-compose.yml</code> file, change the port declaration to:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> 443</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">8443/tcp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="api-fortress-through-an-https-gateway">API Fortress through an HTTPS gateway<a href="#api-fortress-through-an-https-gateway" class="hash-link" aria-label="Direct link to API Fortress through an HTTPS gateway" title="Direct link to API Fortress through an HTTPS gateway">​</a></h3>
<p>You may want to run API Fortress through a gateway that provides HTTPS support. To do so, you will need to allow Tomcat to determine which protocol was <strong>originally</strong> used to access the service.</p>
<ol>
<li>
<p>Run API Fortress on an unprivileged HTTP port, like the default <code>8080</code></p>
</li>
<li>
<p>Mount the <code>tomcat_conf</code> directory as described in the previous appendix</p>
</li>
<li>
<p>Edit the file <code>tomcat_conf/conf/context.xml</code></p>
</li>
<li>
<p>Uncomment the following section:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">&lt;!-- &lt;Valve</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">       className=&quot;org.apache.catalina.valves.RemoteIpValve&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">       internalProxies=&quot;.\*&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">       remoteIpHeader=&quot;x-forwarded-for&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">       proxiesHeader=&quot;x-forwarded-by&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">       protocolHeader=&quot;x-forwarded-proto&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">   /&gt; --&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Tweak the configuration if needed</p>
</li>
<li>
<p>Restart the API Fortress dashboard service</p>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/saucelabs/sauce-docs/edit/main/docs/api-testing/on-prem/self-hosted/deployment-docker.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-12-14T02:13:20.000Z" itemprop="dateModified">Dec 14, 2022</time></b> by <b>Jame Tacker</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/on-premises-backing-up-your-data/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Backing Up your Data</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/sauce-docs/pr-preview/pr-2906/api-testing/on-prem/self-hosted/deployment-kubernetes/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deployment - Kubernetes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#1-copy-the-provided-script-files" class="table-of-contents__link toc-highlight">1. Copy the Provided Script Files</a></li><li><a href="#2-configure-the-core-services" class="table-of-contents__link toc-highlight">2. Configure the Core Services</a></li><li><a href="#3-install-docker" class="table-of-contents__link toc-highlight">3. Install Docker</a></li><li><a href="#4-install-docker-compose" class="table-of-contents__link toc-highlight">4. Install Docker Compose</a></li><li><a href="#5-provide-api-fortress-your-dockerhub-username" class="table-of-contents__link toc-highlight">5. Provide API Fortress your DockerHub <code>username</code></a></li><li><a href="#6-login" class="table-of-contents__link toc-highlight">6. Login</a></li><li><a href="#7-create-the-api-fortress-network" class="table-of-contents__link toc-highlight">7. Create the API Fortress <code>network</code></a></li><li><a href="#8-launch-the-services" class="table-of-contents__link toc-highlight">8. Launch the Services</a></li><li><a href="#9-verify-the-deployment" class="table-of-contents__link toc-highlight">9. Verify the Deployment</a></li><li><a href="#10-configure-and-run-the-downloader" class="table-of-contents__link toc-highlight">10. Configure and Run the Downloader</a></li><li><a href="#11-configure-and-run-the-load-agent" class="table-of-contents__link toc-highlight">11. Configure and run the Load Agent</a><ul><li><a href="#step-1-configure-the-maximum-users-per-load-agent" class="table-of-contents__link toc-highlight">Step 1: Configure the maximum users per load agent</a></li><li><a href="#step-2-configure-the-configyml-file" class="table-of-contents__link toc-highlight">Step 2: Configure the config.yml file</a></li><li><a href="#step-3-add-the-engine" class="table-of-contents__link toc-highlight">Step 3: Add the engine</a></li><li><a href="#step-4-run-the-engine" class="table-of-contents__link toc-highlight">Step 4: Run the engine</a></li></ul></li><li><a href="#api-fortress-configuration-guide" class="table-of-contents__link toc-highlight">API Fortress Configuration Guide</a><ul><li><a href="#bootstrap" class="table-of-contents__link toc-highlight">Bootstrap</a></li><li><a href="#system" class="table-of-contents__link toc-highlight">System</a></li><li><a href="#email" class="table-of-contents__link toc-highlight">Email</a></li><li><a href="#api-fortress-mailer" class="table-of-contents__link toc-highlight">API Fortress Mailer</a></li><li><a href="#api-fortress-downloader" class="table-of-contents__link toc-highlight">API Fortress Downloader</a></li></ul></li><li><a href="#appendix-importing-help-tools-and-connectors" class="table-of-contents__link toc-highlight">Appendix: Importing help tools and connectors</a></li><li><a href="#appendix-tweaking-tomcat-configuration" class="table-of-contents__link toc-highlight">Appendix: Tweaking Tomcat Configuration</a><ul><li><a href="#dashboard-over-ssl" class="table-of-contents__link toc-highlight">Dashboard over SSL</a></li><li><a href="#api-fortress-through-an-https-gateway" class="table-of-contents__link toc-highlight">API Fortress through an HTTPS gateway</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center footer__inner"><div class="margin-bottom--sm"><a href="https://saucelabs.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_fGS1"><img src="/sauce-docs/pr-preview/pr-2906/img/sl-logo-horizontal-color-neutral.svg" alt="Sauce Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/sauce-docs/pr-preview/pr-2906/img/sl-logo-horizontal-color-neutral.svg" alt="Sauce Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div></div><div class="footer-items"><h5><a href="https://saucelabs.com/">Sauce Labs</a></h5><h5><a href="https://stackoverflow.com/tags/saucelabs">Community</a></h5><h5><a href="https://opensource.saucelabs.com/">Open Source</a></h5><h5><a href="https://support.saucelabs.com/hc/en-us">Customer Support</a></h5></div><div class="footer-column"><span class="social-container"><p>Follow us</p><a href="https://www.facebook.com/saucelabs" target="_blank" data-ta="click" data-tc="Icon" data-tl="facebook" rel="noreferrer"><i class="svg svg-facebook"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-3 7h-1.924c-.615 0-1.076.252-1.076.889v1.111h3l-.238 3h-2.762v8h-3v-8h-2v-3h2v-1.923c0-2.022 1.064-3.077 3.461-3.077h2.539v3z"></path></svg></i></a><a href="https://www.linkedin.com/company/891955" target="_blank" data-ta="click" data-tc="Icon" data-tl="linkedin" rel="noreferrer"><i class="svg svg-linkedin"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></i></a><a href="https://twitter.com/saucelabs" target="_blank" data-ta="click" data-tc="Icon" data-tl="twitter" rel="noreferrer"><i class="svg svg-twitter"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-.139 9.237c.209 4.617-3.234 9.765-9.33 9.765-1.854 0-3.579-.543-5.032-1.475 1.742.205 3.48-.278 4.86-1.359-1.437-.027-2.649-.976-3.066-2.28.515.098 1.021.069 1.482-.056-1.579-.317-2.668-1.739-2.633-3.26.442.246.949.394 1.486.411-1.461-.977-1.875-2.907-1.016-4.383 1.619 1.986 4.038 3.293 6.766 3.43-.479-2.053 1.08-4.03 3.199-4.03.943 0 1.797.398 2.395 1.037.748-.147 1.451-.42 2.086-.796-.246.767-.766 1.41-1.443 1.816.664-.08 1.297-.256 1.885-.517-.439.656-.996 1.234-1.639 1.697z"></path></svg></i></a></span><span class="link-container"><ul><li><a class="link" href="https://saucelabs.com/privacy-policy" target="" data-ta="click" data-tc="Text" data-tl="">Privacy Policy</a></li><li><a class="link" href="https://saucelabs.com/terms-of-service" target="" data-ta="click" data-tc="Text" data-tl="">Terms of Service</a></li><li><a class="link" href="https://saucelabs.com/privacy-policy#eea" target="" data-ta="click" data-tc="Text" data-tl="">GDPR</a></li></ul></span></div><div></div><div class="footer__bottom text--center footer__inner"><div class="footer__copyright">© 2024 Sauce Labs, Inc. SAUCE and SAUCE LABS are registered trademarks owned by Sauce Labs Inc. in the United States, EU, and may be registered in other jurisdictions.</div></div></div></footer></div>
</body>
</html>