"use strict";(self.webpackChunksauce_docs=self.webpackChunksauce_docs||[]).push([[76286],{92997:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var r=a(74848),n=a(28453);a(11470),a(19365),a(86025);const i={id:"file-attachments",title:"File Attachments",sidebar_label:"File Attachments",description:"This article will provide an overview of the supported ways to upload file attachments."},o=void 0,s={id:"error-reporting/platform-integrations/file-attachments",title:"File Attachments",description:"This article will provide an overview of the supported ways to upload file attachments.",source:"@site/docs/error-reporting/platform-integrations/file-attachments.md",sourceDirName:"error-reporting/platform-integrations",slug:"/error-reporting/platform-integrations/file-attachments",permalink:"/sauce-docs/pr-preview/pr-2911/error-reporting/platform-integrations/file-attachments",draft:!1,unlisted:!1,editUrl:"https://github.com/saucelabs/sauce-docs/edit/main/docs/error-reporting/platform-integrations/file-attachments.md",tags:[],version:"current",lastUpdatedBy:"Alex Plischke",lastUpdatedAt:1724800332e3,frontMatter:{id:"file-attachments",title:"File Attachments",sidebar_label:"File Attachments",description:"This article will provide an overview of the supported ways to upload file attachments."},sidebar:"backtrace",previous:{title:"Minidump",permalink:"/sauce-docs/pr-preview/pr-2911/error-reporting/platform-integrations/minidump"},next:{title:"Getting Started",permalink:"/sauce-docs/pr-preview/pr-2911/error-reporting/web-console/getting-started"}},l={},c=[{value:"HTTP Submission of Minidumps and File Attachments",id:"http-submission-of-minidumps-and-file-attachments",level:2},{value:"Multipart POST",id:"multipart-post",level:3},{value:"Attach a File to an Existing Crash Report",id:"attach-a-file-to-an-existing-crash-report",level:3},{value:"Breakpad",id:"breakpad",level:2},{value:"Crashpad",id:"crashpad",level:2},{value:"C# and Unity",id:"c-and-unity",level:2}];function u(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"Backtrace allows the submission of file attachments alongside error and crash reports to provide more context into a fault. There are various methods that can be used depending on how you are integrating your applications into Backtrace. This article will provide an overview of the supported ways to upload file attachments."}),"\n",(0,r.jsx)(t.h2,{id:"http-submission-of-minidumps-and-file-attachments",children:"HTTP Submission of Minidumps and File Attachments"}),"\n",(0,r.jsx)(t.p,{children:"Backtrace provides a generic mechanism to accept crash reports and error submissions over HTTP(S). Most minidump generators have a built-in mechanism to upload minidumps and optional attachments to a specified HTTP(S) endpoint, but not all."}),"\n",(0,r.jsx)(t.p,{children:"If your integration path to Backtrace does not provide a way to upload minidump files and attachments to Backtrace, you can use our generic HTTP submission methods. You have two options:"}),"\n",(0,r.jsx)(t.h3,{id:"multipart-post",children:"Multipart POST"}),"\n",(0,r.jsx)(t.p,{children:"A submission where the test.json attachment is included with the initial crash submission. You will need to modify the following to successfully submit to a project within your account:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"{Path_to_your_file}: Location of file containing crash data to send."}),"\n",(0,r.jsx)(t.li,{children:"{Path_to_your_attachment}: Location of file to be attached to the crash."}),"\n",(0,r.jsx)(t.li,{children:"{universe}: First part of the URL used to access your Backtrace account."}),"\n",(0,r.jsx)(t.li,{children:"{error-token}: An error token for the project you want to submit crash data to."}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-curl",children:'curl -v -F "upload_file=@<Path_to_your_file>/test.json" -H "Accept: application/json" -F "attachment_test.json=@<Path_to_your_file>/test.json; type=application/json" "https://<universe>.sp.backtrace.io/api/post?token=<error-token>&format=json"\n'})}),"\n",(0,r.jsx)(t.h3,{id:"attach-a-file-to-an-existing-crash-report",children:"Attach a File to an Existing Crash Report"}),"\n",(0,r.jsx)(t.p,{children:"For this method, you will need the _rxid value assigned to a submitted crash report. This value will be returned after a submitting a properly formatted request. The first curl command is the submission of the crash report. The second is the attachment of a file to the first."}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"{Path_to_your_file}: Location of file containing crash data to send."}),"\n",(0,r.jsx)(t.li,{children:"{universe}: First part of the URL used to access your Backtrace account."}),"\n",(0,r.jsx)(t.li,{children:"{error-token}: An error token for the project you want to submit crash data to."}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-curl",children:'curl -d <Path_to_your_file> -H "Accept: application/json" "https://<universe>.sp.backtrace.io/api/post?token=<error-token>&format=json"\n'})}),"\n",(0,r.jsx)(t.p,{children:"A properly formatted submission should return a response like:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-curl",children:'{"response":"ok","_rxid":"56000000-8be7-5806-0000-000000000000"}\n'})}),"\n",(0,r.jsx)(t.p,{children:"To attach a file to this object you will need to copy the _rxid returned."}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"&object=<_rxid>: Value returned from first HTTP submission."}),"\n",(0,r.jsx)(t.li,{children:"&attachment_name=<Path_to_your_attachment>: Location of file to be attached to the crash."}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-curl",children:'curl -v --data-binary "upload_file=@<your_file_path>/test.json" -H "Expect: gzip" -H "Content-Type:application/json" "https://<univers>.sp.backtrace.io/api/post?token=<error-token>&format=json&object=<_rxid>&attachment_name=<Path_to_your_attachment>"\n'})}),"\n",(0,r.jsx)(t.p,{children:"A properly formatted upload submission should return a response like:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-curl",children:'{"response":"ok","_rxid":"ce000000-0000-0000-0000-000000000000","attachment_name": "test.json","attachment_id": "28","object":"ce"}\n'})}),"\n",(0,r.jsx)(t.p,{children:"The response should tell you that the file was attached to the specified object within your Backtrace project. You will still get the 200/ok response, but the _rxid is going to look a bit different. As there was not a crash submitted, it will not send a new unique id. This time it is actually sending the id attribute/Error identifier within the debug view used to identify the specific crash report."}),"\n",(0,r.jsx)(t.h2,{id:"breakpad",children:"Breakpad"}),"\n",(0,r.jsxs)(t.p,{children:["Breakpad is an open source library initially developed by Google for cross platform C/C++ crash reporting. It is a popular choice for Windows, Mac and Linux environments, including servers, desktop apps, and embedded devices. For customers who use Breakpad with Backtrace, you can leverage the library's ",(0,r.jsx)(t.code,{children:"files"})," parameter to specify the set of file paths to be uploaded."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",children:'files["upload_file_minidump"] = descriptor.path();\nfiles["attachment_log"] = "/var/log/myApp.log";\nfiles["attachment_cpuinfo"] = "/proc/cpuinfo";\n'})}),"\n",(0,r.jsxs)(t.p,{children:["See the ",(0,r.jsx)(t.a,{href:"/error-reporting/platform-integrations/breakpad/",children:"Breakpad Integration Guide"})," for more details on how to use the files parameter to upload attachments with your crash reports."]}),"\n",(0,r.jsx)(t.h2,{id:"crashpad",children:"Crashpad"}),"\n",(0,r.jsxs)(t.p,{children:["Crashpad is another open source library initially developed by Google as a successor to the Breakpad library. Backtrace has built and released a set of binaries of Crashpad for Windows (64 and 32 bit) that include an ability to upload file attachments. Check out ",(0,r.jsx)(t.a,{href:"http://get.backtrace.io/crashpad/builds/",children:"http://get.backtrace.io/crashpad/builds/"})," to download the binaries for your OS."]}),"\n",(0,r.jsx)(t.p,{children:"To provide you with the ability to upload files, we have implemented a new handler to make file attachments just as simple as setting up any other piece of metadata to come alongside the crash."}),"\n",(0,r.jsx)(t.p,{children:"Here\u2019s what it looks like:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",children:"bool StartHandlerForBacktrace(\n    const base::FilePath& handler,\n    const base::FilePath& database,\n    const base::FilePath& metrics_dir,\n    const std::string& url,\n    const std::map\n"})}),"\n",(0,r.jsx)(t.p,{children:"This new handler is very similar to StartHandler, with the addition of the file_attachments parameter. file_attachments is a map of attachment name \u27f6 path, allowing convenient inclusion of file attachments (i.e. the log file) with the crash dump."}),"\n",(0,r.jsxs)(t.p,{children:["More details can be found in the ",(0,r.jsx)(t.a,{href:"/error-reporting/platform-integrations/crashpad/",children:"Crashpad Integration Guide"}),"."]}),"\n",(0,r.jsx)(t.p,{children:"As we move forward, Backtrace plans to work with the upstream Crashpad team to implement file attachment support in the master branch."}),"\n",(0,r.jsx)(t.h2,{id:"c-and-unity",children:"C# and Unity"}),"\n",(0,r.jsxs)(t.p,{children:["Backtrace supports crash and exception reporting from applications written in C# using our C# reporting library or Unity-Plugin. Using our ",(0,r.jsx)(t.a,{href:"/error-reporting/platform-integrations/unity/configuration/#backtracereport",children:"BacktraceReport"})," object, developers can specify a list of ",(0,r.jsx)(t.code,{children:"attachmentPaths"})," to submit alongside the crash or exception report."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",children:"var report = new BacktraceReport(\n  exception: exception,\n  attributes: new Dictionary\n"})})]})}function d(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},19365:(e,t,a)=>{a.d(t,{A:()=>o});a(96540);var r=a(18215);const n={tabItem:"tabItem_Ymn6"};var i=a(74848);function o(e){let{children:t,hidden:a,className:o}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)(n.tabItem,o),hidden:a,children:t})}},11470:(e,t,a)=>{a.d(t,{A:()=>w});var r=a(96540),n=a(18215),i=a(23104),o=a(56347),s=a(205),l=a(57485),c=a(31682),u=a(89466);function d(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:a}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return d(e).map((e=>{let{props:{value:t,label:a,attributes:r,default:n}}=e;return{value:t,label:a,attributes:r,default:n}}))}(a);return function(e){const t=(0,c.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function p(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:a}=e;const n=(0,o.W6)(),i=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,l.aZ)(i),(0,r.useCallback)((e=>{if(!i)return;const t=new URLSearchParams(n.location.search);t.set(i,e),n.replace({...n.location,search:t.toString()})}),[i,n])]}function f(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,i=h(e),[o,l]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=a.find((e=>e.default))??a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:i}))),[c,d]=m({queryString:a,groupId:n}),[f,b]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,i]=(0,u.Dv)(a);return[n,(0,r.useCallback)((e=>{a&&i.set(e)}),[a,i])]}({groupId:n}),g=(()=>{const e=c??f;return p({value:e,tabValues:i})?e:null})();(0,s.A)((()=>{g&&l(g)}),[g]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),b(e)}),[d,b,i]),tabValues:i}}var b=a(92303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=a(74848);function x(e){let{className:t,block:a,selectedValue:r,selectValue:o,tabValues:s}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.a_)(),u=e=>{const t=e.currentTarget,a=l.indexOf(t),n=s[a].value;n!==r&&(c(t),o(n))},d=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const a=l.indexOf(e.currentTarget)+1;t=l[a]??l[0];break}case"ArrowLeft":{const a=l.indexOf(e.currentTarget)-1;t=l[a]??l[l.length-1];break}}t?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.A)("tabs",{"tabs--block":a},t),children:s.map((e=>{let{value:t,label:a,attributes:i}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>l.push(e),onKeyDown:d,onClick:u,...i,className:(0,n.A)("tabs__item",g.tabItem,i?.className,{"tabs__item--active":r===t}),children:a??t},t)}))})}function j(e){let{lazy:t,children:a,selectedValue:n}=e;const i=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=i.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:i.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n})))})}function y(e){const t=f(e);return(0,v.jsxs)("div",{className:(0,n.A)("tabs-container",g.tabList),children:[(0,v.jsx)(x,{...e,...t}),(0,v.jsx)(j,{...e,...t})]})}function w(e){const t=(0,b.A)();return(0,v.jsx)(y,{...e,children:d(e.children)},String(t))}},28453:(e,t,a)=>{a.d(t,{R:()=>o,x:()=>s});var r=a(96540);const n={},i=r.createContext(n);function o(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);