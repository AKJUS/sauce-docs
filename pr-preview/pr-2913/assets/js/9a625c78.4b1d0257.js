"use strict";(self.webpackChunksauce_docs=self.webpackChunksauce_docs||[]).push([[62892],{10654:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var a=r(74848),n=r(28453),s=(r(11470),r(19365),r(86025));const o={id:"deduplication-rules",title:"Customizing Deduplication Rules",sidebar_label:"Customizing Deduplication Rules",description:"Backtrace offers customers the ability to upload their symbols directly to our systems, or to retrieve symbols from your managed private symbol server on demand."},i=void 0,l={id:"error-reporting/project-setup/deduplication-rules",title:"Customizing Deduplication Rules",description:"Backtrace offers customers the ability to upload their symbols directly to our systems, or to retrieve symbols from your managed private symbol server on demand.",source:"@site/docs/error-reporting/project-setup/deduplication-rules.md",sourceDirName:"error-reporting/project-setup",slug:"/error-reporting/project-setup/deduplication-rules",permalink:"/sauce-docs/pr-preview/pr-2913/error-reporting/project-setup/deduplication-rules",draft:!1,unlisted:!1,editUrl:"https://github.com/saucelabs/sauce-docs/edit/main/docs/error-reporting/project-setup/deduplication-rules.md",tags:[],version:"current",lastUpdatedBy:"Alex Plischke",lastUpdatedAt:1724864962e3,frontMatter:{id:"deduplication-rules",title:"Customizing Deduplication Rules",sidebar_label:"Customizing Deduplication Rules",description:"Backtrace offers customers the ability to upload their symbols directly to our systems, or to retrieve symbols from your managed private symbol server on demand."},sidebar:"backtrace",previous:{title:"Deduplication",permalink:"/sauce-docs/pr-preview/pr-2913/error-reporting/project-setup/deduplication"},next:{title:"Submission Actions",permalink:"/sauce-docs/pr-preview/pr-2913/error-reporting/project-setup/submission-actions"}},u={},c=[{value:"Feature Overview",id:"feature-overview",level:2},{value:"Feature Details",id:"feature-details",level:2},{value:"Deduplication Settings for a Project",id:"deduplication-settings-for-a-project",level:3},{value:"Create a Custom Ruleset",id:"create-a-custom-ruleset",level:3},{value:"Manage Rules in Rulesets",id:"manage-rules-in-rulesets",level:3},{value:"More Examples of Rules",id:"more-examples-of-rules",level:3},{value:"Enable and Disable",id:"enable-and-disable",level:3},{value:"Ruleset Testing",id:"ruleset-testing",level:3}];function d(e){const t={a:"a",admonition:"admonition",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"Backtrace provides a programmable callstack based fingerprinting system, more commonly called our deduplication system. You can find more detailed information about our deduplication system here."}),"\n",(0,a.jsx)(t.p,{children:"In summary, this system allows Backtrace to group errors where root cause can be extrapolated from the contents of one or more faulting callstacks. A callstack may have differences for the same bug due to reasons like non-determinism, optimizations and recursion. To account for this, Backtrace built a programmable rules based system that can efficiently evaluate each frame in a callstack to decide if it needs removal or transformation to be normalized for more accurate grouping. We have developed a set of rules that are provided out of the box from common frameworks and platforms. (We call this the Backtrace Ruleset)."}),"\n",(0,a.jsx)(t.h2,{id:"feature-overview",children:"Feature Overview"}),"\n",(0,a.jsx)(t.p,{children:"Backtrace customers on the Enterprise plan can now easily add their own rulesets and rules to best fit their individual use cases and environments. Features include:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Manage rulesets for a project. A ruleset is evaluated for an incoming callstack to a specified project, and consists of a set of rules for evaluation and an optional language or OS that the rules apply to."}),"\n",(0,a.jsx)(t.li,{children:"Manage rules in a ruleset: A rule consists of a reg-ex that can be evaluated on a given frame in a callstack, and a set of actions that should occur if the expression evaluates to true. The actions are extensive, including ability to rename functions, skip frames in current object file, ignore current frame, terminate after frame, add attribute to signature values, and more. The point is that you can create rules to normalize for various optimizations and code paths for a given callstack, optionally limiting to specific language or operating systems."}),"\n",(0,a.jsx)(t.li,{children:"Test rulesets to preview actions they would take on an incoming callstack."}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"feature-details",children:"Feature Details"}),"\n",(0,a.jsx)(t.p,{children:"Deduplication rules can be access under Project Settings."}),"\n",(0,a.jsx)(t.h3,{id:"deduplication-settings-for-a-project",children:"Deduplication Settings for a Project"}),"\n",(0,a.jsx)(t.p,{children:"Under Project Settings, you'll see a Deduplication section. This section will list for you the named rulesets that are associated with the project, in order of their execution. You will see a default and un-editable ruleset, called the Backtrace Ruleset. These are rules we automatically process for all incoming callstacks (Note you can't view or manage this - it's part of our secret sauce!). You can add and manage additional custom rulesets for the project. See a screenshot below for an out of the box view of project with no custom deduplication rules."}),"\n",(0,a.jsx)("img",{src:(0,s.Ay)("img/error-reporting/project-settings/deduplication-config.png"),alt:"deduplication config"}),"\n",(0,a.jsx)(t.h3,{id:"create-a-custom-ruleset",children:"Create a Custom Ruleset"}),"\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)(t.strong,{children:"Add new ruleset"})," to create a new ruleset."]}),"\n",(0,a.jsx)("img",{src:(0,s.Ay)("img/error-reporting/project-settings/add-new-dedup-ruleset.png"),alt:"add new deduplication ruleset"}),"\n",(0,a.jsx)(t.p,{children:"As you can see, each ruleset consists of a name, an optional set or languages or OS that the rules within should apply to, an enable/disable toggle, and the ability to add a set of rules that should be evaluated."}),"\n",(0,a.jsx)(t.h3,{id:"manage-rules-in-rulesets",children:"Manage Rules in Rulesets"}),"\n",(0,a.jsx)(t.p,{children:"A rule consists of a set of predicates (IF statements), and a set of actions to take IF the statements evaluate TRUE.\nThe IF statements evaluate matches against functions, objects, or sources using regex:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Function is the name of the function."}),"\n",(0,a.jsx)(t.li,{children:"Source is the name of the source file that the function came from."}),"\n",(0,a.jsx)(t.li,{children:"Object is the name of the object."}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)(t.strong,{children:"Add a rule"})," to add a new rule."]}),"\n",(0,a.jsx)(t.admonition,{title:"Regex Support",type:"caution",children:(0,a.jsxs)(t.p,{children:['Backtrace supports "PCRE minus", a subset of the PCRE standard.\nYou can find the library at ',(0,a.jsx)(t.a,{href:"https://docs.rs/regex/latest/regex/",children:"https://docs.rs/regex/latest/regex/"}),"."]})}),"\n",(0,a.jsx)("img",{src:(0,s.Ay)("img/error-reporting/project-settings/dedup-ruleset.png"),alt:"ruleset"}),"\n",(0,a.jsx)(t.h3,{id:"more-examples-of-rules",children:"More Examples of Rules"}),"\n",(0,a.jsx)(t.p,{children:"Below is an example of a more complex rule, with three predicates and a list of all available actions:"}),"\n",(0,a.jsx)("img",{src:(0,s.Ay)("img/error-reporting/project-settings/dedup-ruleset-examples.png"),alt:"examples"}),"\n",(0,a.jsx)(t.p,{children:"The second example shows two rules for a rule set. The first rule has 3 actions, including ignoring and skipping frames, and setting a new attribute. The second rule shows how to perform a replacement of a function name."}),"\n",(0,a.jsx)("img",{src:(0,s.Ay)("img/error-reporting/project-settings/ruleset-replace-example.png"),alt:"ruleset replace example"}),"\n",(0,a.jsx)(t.h3,{id:"enable-and-disable",children:"Enable and Disable"}),"\n",(0,a.jsx)(t.p,{children:"You can quickly enable or disable rules in the toggle menu."}),"\n",(0,a.jsx)("img",{src:(0,s.Ay)("img/error-reporting/project-settings/disable-dedup-rules.webp"),alt:"disable deduplication rules"}),"\n",(0,a.jsx)(t.h3,{id:"ruleset-testing",children:"Ruleset Testing"}),"\n",(0,a.jsx)(t.p,{children:"After creating a ruleset, you can test the output of the deduplication engine with an existing crash report (or error) in the system. Just enter the Instance ID of the crash report in the Ruleset Testing field. (You can get an instance ID from the Debug view. You will see the Ruleset Testing field after you have saved a Ruleset)."}),"\n",(0,a.jsx)("img",{src:(0,s.Ay)("img/error-reporting/project-settings/dedup-ruleset-testing.webp"),alt:"deduplication ruleset testing"})]})}function p(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},19365:(e,t,r)=>{r.d(t,{A:()=>o});r(96540);var a=r(34164);const n={tabItem:"tabItem_Ymn6"};var s=r(74848);function o(e){let{children:t,hidden:r,className:o}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,a.A)(n.tabItem,o),hidden:r,children:t})}},11470:(e,t,r)=>{r.d(t,{A:()=>w});var a=r(96540),n=r(34164),s=r(23104),o=r(56347),i=r(205),l=r(57485),u=r(31682),c=r(70679);function d(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:t,children:r}=e;return(0,a.useMemo)((()=>{const e=t??function(e){return d(e).map((e=>{let{props:{value:t,label:r,attributes:a,default:n}}=e;return{value:t,label:r,attributes:a,default:n}}))}(r);return function(e){const t=(0,u.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,r])}function m(e){let{value:t,tabValues:r}=e;return r.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:r}=e;const n=(0,o.W6)(),s=function(e){let{queryString:t=!1,groupId:r}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:t,groupId:r});return[(0,l.aZ)(s),(0,a.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(n.location.search);t.set(s,e),n.replace({...n.location,search:t.toString()})}),[s,n])]}function f(e){const{defaultValue:t,queryString:r=!1,groupId:n}=e,s=p(e),[o,l]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=r.find((e=>e.default))??r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:s}))),[u,d]=h({queryString:r,groupId:n}),[f,g]=function(e){let{groupId:t}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,s]=(0,c.Dv)(r);return[n,(0,a.useCallback)((e=>{r&&s.set(e)}),[r,s])]}({groupId:n}),b=(()=>{const e=u??f;return m({value:e,tabValues:s})?e:null})();(0,i.A)((()=>{b&&l(b)}),[b]);return{selectedValue:o,selectValue:(0,a.useCallback)((e=>{if(!m({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),g(e)}),[d,g,s]),tabValues:s}}var g=r(92303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=r(74848);function x(e){let{className:t,block:r,selectedValue:a,selectValue:o,tabValues:i}=e;const l=[],{blockElementScrollPositionUntilNextRender:u}=(0,s.a_)(),c=e=>{const t=e.currentTarget,r=l.indexOf(t),n=i[r].value;n!==a&&(u(t),o(n))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const r=l.indexOf(e.currentTarget)+1;t=l[r]??l[0];break}case"ArrowLeft":{const r=l.indexOf(e.currentTarget)-1;t=l[r]??l[l.length-1];break}}t?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.A)("tabs",{"tabs--block":r},t),children:i.map((e=>{let{value:t,label:r,attributes:s}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:a===t?0:-1,"aria-selected":a===t,ref:e=>l.push(e),onKeyDown:d,onClick:c,...s,className:(0,n.A)("tabs__item",b.tabItem,s?.className,{"tabs__item--active":a===t}),children:r??t},t)}))})}function j(e){let{lazy:t,children:r,selectedValue:s}=e;const o=(Array.isArray(r)?r:[r]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===s));return e?(0,a.cloneElement)(e,{className:(0,n.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:o.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==s})))})}function y(e){const t=f(e);return(0,v.jsxs)("div",{className:(0,n.A)("tabs-container",b.tabList),children:[(0,v.jsx)(x,{...t,...e}),(0,v.jsx)(j,{...t,...e})]})}function w(e){const t=(0,g.A)();return(0,v.jsx)(y,{...e,children:d(e.children)},String(t))}},28453:(e,t,r)=>{r.d(t,{R:()=>o,x:()=>i});var a=r(96540);const n={},s=a.createContext(n);function o(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);