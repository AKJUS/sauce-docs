"use strict";(self.webpackChunksauce_docs=self.webpackChunksauce_docs||[]).push([[17415],{14770:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var s=i(74848),t=i(28453);const r={id:"using-environments",title:"Using the Same Test for Different Environments",sidebar_label:"Using Environments",description:"Reuse the same test for testing against different environments"},l=void 0,a={id:"api-testing/use-cases/using-environments",title:"Using the Same Test for Different Environments",description:"Reuse the same test for testing against different environments",source:"@site/docs/api-testing/use-cases/using-environments.md",sourceDirName:"api-testing/use-cases",slug:"/api-testing/use-cases/using-environments",permalink:"/sauce-docs/pr-preview/pr-2917/api-testing/use-cases/using-environments",draft:!1,unlisted:!1,editUrl:"https://github.com/saucelabs/sauce-docs/edit/main/docs/api-testing/use-cases/using-environments.md",tags:[],version:"current",lastUpdatedBy:"Kerem",lastUpdatedAt:1724932034e3,frontMatter:{id:"using-environments",title:"Using the Same Test for Different Environments",sidebar_label:"Using Environments",description:"Reuse the same test for testing against different environments"},sidebar:"docs",previous:{title:"Using a File from Vault Drive",permalink:"/sauce-docs/pr-preview/pr-2917/api-testing/use-cases/use-drive"},next:{title:"Using GitHub as a Data Source",permalink:"/sauce-docs/pr-preview/pr-2917/api-testing/use-cases/github-datasets"}},o={},d=[{value:"What You&#39;ll Need",id:"what-youll-need",level:2},{value:"Creating the Test",id:"creating-the-test",level:2},{value:"Step 1: Creating the Test",id:"step-1-creating-the-test",level:3},{value:"Step 2: Converting URL into Variables",id:"step-2-converting-url-into-variables",level:3},{value:"Step 3: Creating the Staging Environment",id:"step-3-creating-the-staging-environment",level:3},{value:"Step 4: Creating the Production Environment",id:"step-4-creating-the-production-environment",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"The most common use of Environments is to override the default location value so that you can use the same test to test different domains."}),"\n",(0,s.jsx)(n.h2,{id:"what-youll-need",children:"What You'll Need"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["An existing API Testing Project. For details on how to create a project as well as the basics for creating a test, see ",(0,s.jsx)(n.a,{href:"/api-testing/quickstart/",children:"API Testing Quickstart"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Recommended: review ",(0,s.jsx)(n.a,{href:"/api-testing/vault/",children:"Creating Reusable Variables and Snippets with the Vault"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"creating-the-test",children:"Creating the Test"}),"\n",(0,s.jsxs)(n.p,{children:["The following example generates a test for a ",(0,s.jsx)(n.em,{children:"developer"})," domain, and then creates the environments to run that test against the ",(0,s.jsx)(n.em,{children:"staging"})," and the ",(0,s.jsx)(n.em,{children:"production"})," domains.\nIn this the endpoint requires an ",(0,s.jsx)(n.em,{children:"api key"})," as a query param, and the value is different in every environment."]}),"\n",(0,s.jsx)(n.h3,{id:"step-1-creating-the-test",children:"Step 1: Creating the Test"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["From the Composer, add a ",(0,s.jsx)(n.code,{children:"GET"})," component:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Url - for example ",(0,s.jsx)(n.code,{children:"https://run.mocky.io/v3/c99a075d-8e82-4f6c-904f-cac0359bf4a9/api/retail/product/shoes"})]}),"\n",(0,s.jsxs)(n.li,{children:["Variable - for example ",(0,s.jsx)(n.code,{children:"payload"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Save Changes"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Add a ",(0,s.jsx)(n.strong,{children:"QueryParam"})," as child component:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Name - for example ",(0,s.jsx)(n.code,{children:"api_key"})]}),"\n",(0,s.jsxs)(n.li,{children:["Value - for example ",(0,s.jsx)(n.code,{children:"12345678901234567890"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"Add all the necessary assertions to confirm the response is the expected one."}),"\n",(0,s.jsx)(n.li,{children:"Run the test."}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"This example does not detail adding assertions to the test."})}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Code View example of the test with assertions"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"- id: get\n  children:\n    - id: queryParam\n      name: api_key\n      value: \"1234567890134567890\"\n  url: https://run.mocky.io/v3/c99a075d-8e82-4f6c-904f-cac0359bf4a9/api/retail/product/shoes\n  var: payload\n  mode: json\n- id: assert-equals\n  expression: payload_response.headers['Content-Type']\n  value: application/json; charset=UTF-8\n- id: assert-is\n  expression: payload\n  type: array\n- id: each\n  children:\n    - id: assert-is\n      expression: _1.id\n      type: integer\n    - id: assert-exists\n      expression: _1.name\n    - id: assert-exists\n      expression: _1.price\n    - id: assert-exists\n      expression: _1.image\n    - id: assert-exists\n      expression: _1.description\n  expression: payload.pick(5)\n"})})]}),"\n",(0,s.jsx)(n.h3,{id:"step-2-converting-url-into-variables",children:"Step 2: Converting URL into Variables"}),"\n",(0,s.jsx)(n.p,{children:"To use this example test in different environments, you can replace the URL and any other data related to the environment the test is running on with a variable:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Edit ",(0,s.jsx)(n.strong,{children:"GET"})," component:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["URL - for example ",(0,s.jsx)(n.code,{children:"${protocol}${domain}${endpoint}"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["In the Input Set tab, add a Global Variable:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Name - for example ",(0,s.jsx)(n.code,{children:"protocol"})]}),"\n",(0,s.jsxs)(n.li,{children:["Value - for example ",(0,s.jsx)(n.code,{children:"https://"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Add a Global Variable:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Name - for example ",(0,s.jsx)(n.code,{children:"domain"})]}),"\n",(0,s.jsxs)(n.li,{children:["Value - for example ",(0,s.jsx)(n.code,{children:"run.mocky.io/v3/c99a075d-8e82-4f6c-904f-cac0359bf4a9"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Add a Global Variable:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Name - for example ",(0,s.jsx)(n.code,{children:"endpoint"})]}),"\n",(0,s.jsxs)(n.li,{children:["Value - for example ",(0,s.jsx)(n.code,{children:"/api/retail/product/shoes"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["In the Unit tab, Edit ",(0,s.jsx)(n.strong,{children:"QueryParam"})," component:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Value - for example ",(0,s.jsx)(n.code,{children:"${apiKey}"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["In the Input Set tab, add a Global Variable:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Name - for example ",(0,s.jsx)(n.code,{children:"apiKey"})]}),"\n",(0,s.jsxs)(n.li,{children:["Value - for example ",(0,s.jsx)(n.code,{children:"1234567890134567890"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"Run the test."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-3-creating-the-staging-environment",children:"Step 3: Creating the Staging Environment"}),"\n",(0,s.jsxs)(n.p,{children:["Now that the test is set up to run in different environments, you can create and run the test in a ",(0,s.jsx)(n.code,{children:"staging"})," environment."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"No environments"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Add Item"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Enter the ",(0,s.jsx)(n.strong,{children:"Environment name"}),", for example ",(0,s.jsx)(n.code,{children:"staging"})," then ",(0,s.jsx)(n.strong,{children:"Confirm"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Create Variable"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Key - for example ",(0,s.jsx)(n.code,{children:"domain"})]}),"\n",(0,s.jsxs)(n.li,{children:["Value - for example ",(0,s.jsx)(n.code,{children:"run.mocky.io/v3/656dc17e-02ee-43f8-8bad-ed5ce3cc5911"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Confirm"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Create Variable"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Key - for example ",(0,s.jsx)(n.code,{children:"apiKey"})]}),"\n",(0,s.jsxs)(n.li,{children:["Value - for example ",(0,s.jsx)(n.code,{children:"09876543210987654321"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Confirm"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Close the Environment Variable window.","\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"The environment you just created is selected by default in the dropdown list."})}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"Run the test with the selected environment."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["This time the test has been executed against the ",(0,s.jsx)(n.code,{children:"staging"})," domain with the ",(0,s.jsx)(n.code,{children:"apiKey"})," for staging, instead of the default value (that is ",(0,s.jsx)(n.code,{children:"developer"})," environment)"]}),"\n",(0,s.jsx)(n.h3,{id:"step-4-creating-the-production-environment",children:"Step 4: Creating the Production Environment"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"No environments"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Add Item"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Enter the ",(0,s.jsx)(n.strong,{children:"Environment name"}),", for example ",(0,s.jsx)(n.code,{children:"production"})," then ",(0,s.jsx)(n.strong,{children:"Confirm"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Create Variable"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Key - for example ",(0,s.jsx)(n.code,{children:"domain"})]}),"\n",(0,s.jsxs)(n.li,{children:["Value - for example ",(0,s.jsx)(n.code,{children:"run.mocky.io/v3/a232a97f-8e4d-4709-838f-b6851d738ab4"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Confirm"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Create Variable"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Key - for example ",(0,s.jsx)(n.code,{children:"apiKey"})]}),"\n",(0,s.jsxs)(n.li,{children:["Value - for example ",(0,s.jsx)(n.code,{children:"6789012345789012345"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Confirm"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Close the Environment Variable window."}),"\n",(0,s.jsx)(n.li,{children:"Run the test with the selected environment."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["This time the test has been executed against the ",(0,s.jsx)(n.code,{children:"production"})," domain with the ",(0,s.jsx)(n.code,{children:"apiKey"})," for production."]}),"\n",(0,s.jsxs)(n.p,{children:["As a result of the above steps, you have a test that, by default, runs against the ",(0,s.jsx)(n.code,{children:"developer"})," environment and when required, you can choose to run it against the ",(0,s.jsx)(n.code,{children:"staging"})," or ",(0,s.jsx)(n.code,{children:"production"})," by selecting the proper environment."]}),"\n",(0,s.jsx)(n.p,{children:"You can create as many environments as you need for your testing requirements."}),"\n",(0,s.jsxs)(n.p,{children:["The example focused on creating environments for running the test manually, if you want ",(0,s.jsx)(n.a,{href:"/api-testing/schedule-test/",children:"schedule the test run"}),", you can add the variables in the Override section."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var s=i(96540);const t={},r=s.createContext(t);function l(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);