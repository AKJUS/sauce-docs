"use strict";(self.webpackChunksauce_docs=self.webpackChunksauce_docs||[]).push([[14690],{27111:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var i=t(74848),s=t(28453);const o={id:"apif-auto",title:"Jenkins: APIF-Auto",sidebar_label:"APIF-Auto",keywords:["cicd","jenkins","apif-auto","api-fortress"]},r=void 0,a={id:"api-testing/on-prem/ci/jenkins/apif-auto",title:"Jenkins: APIF-Auto",description:"Legacy DocumentationYou're viewing legacy documentation for API Fortress (deployed via an on-premises container). To view documentation for the new SaaS version of API Fortress &#8212; now known as Sauce Labs API Testing and Monitoring (with Sauce Connect tunnels) &#8212; see API Testing on the Sauce Labs Cloud.",source:"@site/docs/api-testing/on-prem/ci/jenkins/apif-auto.md",sourceDirName:"api-testing/on-prem/ci/jenkins",slug:"/api-testing/on-prem/ci/jenkins/apif-auto",permalink:"/sauce-docs/pr-preview/pr-2903/api-testing/on-prem/ci/jenkins/apif-auto",draft:!1,unlisted:!1,editUrl:"https://github.com/saucelabs/sauce-docs/edit/main/docs/api-testing/on-prem/ci/jenkins/apif-auto.md",tags:[],version:"current",lastUpdatedBy:"Jame Tacker",lastUpdatedAt:1670984e6,frontMatter:{id:"apif-auto",title:"Jenkins: APIF-Auto",sidebar_label:"APIF-Auto",keywords:["cicd","jenkins","apif-auto","api-fortress"]},sidebar:"apif",previous:{title:"Using the API",permalink:"/sauce-docs/pr-preview/pr-2903/api-testing/on-prem/ci/jenkins/using-the-api"},next:{title:"APIF-Auto with GitHub",permalink:"/sauce-docs/pr-preview/pr-2903/api-testing/on-prem/ci/jenkins/apif-auto-and-github"}},c={},d=[];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{Head:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t,{children:(0,i.jsx)("meta",{name:"robots",content:"noindex"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Legacy Documentation"}),(0,i.jsx)("br",{}),"You're viewing legacy documentation for API Fortress (deployed via an on-premises container). To view documentation for the new SaaS version of API Fortress \u2014 now known as Sauce Labs API Testing and Monitoring (with Sauce Connect tunnels) \u2014 see ",(0,i.jsx)(n.a,{href:"/api-testing/",children:"API Testing on the Sauce Labs Cloud"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"APIF-Auto, a command line tool that supports automated API Fortress test execution is an ideal tool for executing API Fortress tests in a Jenkins workflow."}),"\n",(0,i.jsxs)(n.p,{children:["The pipeline script below serves as a template for creating a stage in your Jenkins Pipeline for testing your APIs with API Fortress. If you\u2019d like to take a look at the documentation for APIF-Auto, click ",(0,i.jsx)(n.a,{href:"https://apifortress.com/doc/command-line-tools/",children:"here"}),"."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"NOTE"}),": It's important to note that this is an ",(0,i.jsx)(n.strong,{children:"example"})," of a ",(0,i.jsx)(n.code,{children:"jenkinsfile"})," (Jenkins Pipeline). Experienced Jenkins users are free to configure their workflow as best suits their needs."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pipeline{\n   agent any\nstages {\n   stage('Execute API Fortress Tests') {\n     steps {\n       sh 'mkdir -p apifortress-reports'\n       sh 'python /Path/to/apif-Auto/directory/apif-run.py run-all demo -S -f junit -o apifortress-reports/apif.xml'\n       }\n   post {\n     always {\n       junit \"apifortress-reports/\"\n       }\n     }\n   }\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"sh 'mkdir -p apifortress-reports'"})})}),"\n",(0,i.jsxs)(n.p,{children:["Let\u2019s break down what\u2019s going on here! First, we\u2019re telling jenkins to create a new directory called ",(0,i.jsx)(n.code,{children:"apifortress-reports"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"You can name this directory whatever you\u2019d like, but there are a couple of important notes to remember:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["First, remember the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"-p"})})," flag! It\u2019ll keep the pipeline from overwriting the directory if it already exists in the future."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Second, remember the name! We\u2019re going to need it later."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"sh 'python /Path/to/apif-Auto/directory/apif-run.py run-all demo -S -f junit -o apifortress-reports/apif.xml'"})}),"\n",(0,i.jsx)(n.p,{children:"Next, we\u2019re going to execute the actual test execution with API Fortress via APIF-Auto."}),"\n",(0,i.jsxs)(n.p,{children:["We\u2019re invoking the tool with ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"python"})})," and the ",(0,i.jsx)(n.strong,{children:"path to the tool"}),". We\u2019re passing a run-all argument for the project and credentials defined with the ",(0,i.jsx)(n.strong,{children:"demo"})," config key."]}),"\n",(0,i.jsxs)(n.p,{children:["The test is executing in ",(0,i.jsx)(n.strong,{children:"sync"})," mode, reporting in ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"junit"})})," and ",(0,i.jsx)(n.strong,{children:"outputting"})," to ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"apifortress-reports/apif.xml"})}),". If you notice, the output file is being placed in the directory we created in the previous step!"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:'junit "apifortress-reports/"'})}),"\n",(0,i.jsx)(n.p,{children:"In this final step, we\u2019re publishing the junit test report located in the directory that we established in the first step and called in the second step. By using the above workflow, we have a modular method of running API Fortress tests in authenticated mode in our Jenkins pipeline."}),"\n"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(96540);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);